---
import SectionTitle from "../Text/SectionTitle/SectionTitle";
import ContactForm from "./ContactForm.tsx";
---

<section
  id="contact"
  class="relative pt-[var(--header-height)] flex flex-col gap-8 overflow-hidden"
>
  <SectionTitle client:visible title="Want to reach me ?Â " />

  <div class="wrapper" id="contact-wrapper">
    <ContactForm client:load />
  </div>

  <style>
    section {
      /*       background-color: var(--bg-primary); */
      height: calc(100vh - var(--footer-height));
      position: relative;
      overflow: hidden;
    }

    .wrapper {
      position: relative;
      align-self: center;
      justify-self: center;

      width: 80vw;

      display: flex;
      align-items: center;
      justify-content: center;
      padding-block: 3rem;

      border: 1px solid var(--accent-border-subtle);
      border-radius: 3rem;
      overflow: hidden;
      max-width: 70vw;
      aspect-ratio: 16/9;

      background: linear-gradient(
        to top,
        var(--bg-primary) 0%,
        var(--bg-primary) 100% opacity: 0.5;
      );
    }
  </style>

  <script>
    import gsap from "gsap";
    import { ScrollTrigger } from "gsap/ScrollTrigger";
    gsap.registerPlugin(ScrollTrigger);

    const wrapper = document.querySelector("#contact-wrapper");
    const contactForm = document.querySelector("#contact-form") as HTMLElement;

    let tl = gsap.timeline({
      scrollTrigger: {
        trigger: "#contact",
        start: "top center",
        end: "bottom bottom",
        once: true,
        scrub: true,
        markers: true,
      },
    });

    tl.fromTo(
      wrapper,
      { scale: 3, opacity: 0 },
      {
        scale: 1,
        opacity: 1,

        onComplete: () => {
          contactForm.style.opacity = "1";
        },
      },
    );
  </script>
</section>
